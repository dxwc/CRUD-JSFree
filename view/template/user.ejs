<?- include('./common/layout_pre.ejs', { title : 'User', name : locals.name }) ?>
<? if(locals.user_name) { ?>
<h2>User: <?= locals.user_name ?></h2>
<? if(locals.name && locals.user_name && locals.name !== locals.user_name) { ?>
<form method='POST' action='/follow/<?= user_name ?>'>
    <button type='submit'>Follow</button>
</form>
<? } ?>
<? if(locals.following && following.constructor === Array && following.length) { ?>
<h3>You are following:</h3>
<i>Only visible to you</i>
<ul>

    <? following.forEach((user) => { ?>
    <li><a href='/user/<?= user.name ?>'><?= user.name ?></a></li>
    <? }) ?>
</ul>
<? } ?>
<? if(locals.posts && posts.constructor === Array && posts.length) { ?>
<h3>Your posts: </h3>
<ul>
    <? posts.forEach((post) => { ?>
        <li><a href='/post/<?= post.id ?>'><?= post.createdAt ?></a></li>
    <? }); ?>
</ul>
<? } ?>
<? } else { ?>
    No such user found. If you think this is an error, please retry or contact admin.
<? } ?>

<?- include('./common/layout_post.ejs') ?>